{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst feedbackForm = document.querySelector('form.feedback-form');\nconst localStorageKey = 'feedback-form-state';\nconst persistedState = JSON.parse(localStorage.getItem(localStorageKey));\n\nif (persistedState) {\n  feedbackForm.elements.email.value = persistedState.email;\n  feedbackForm.elements.message.value = persistedState.message;\n}\n\nfeedbackForm.addEventListener(\n  'input',\n  throttle(handleInput, 500, {\n    leading: true,\n    trailing: false,\n  })\n);\nfeedbackForm.addEventListener('submit', handleSubmit);\n\nfunction handleInput(evt) {\n  const form = evt.currentTarget;\n  const email = form?.elements?.email?.value;\n  const message = form?.elements?.message?.value;\n\n  const state = {\n    email,\n    message,\n  };\n\n  localStorage.setItem(localStorageKey, JSON.stringify(state));\n}\n\nfunction handleSubmit(evt) {\n  evt.preventDefault();\n  const form = evt.target;\n  const email = form.elements.email.value;\n  const message = form.elements.message.value;\n\n  if (email === '' || message === '') {\n    return alert('Please fill in all the fields!');\n  }\n\n  const state = {\n    email,\n    message,\n  };\n\n  console.log('state: ', state);\n  form.reset();\n  localStorage.removeItem(localStorageKey);\n}\n"],"names":["feedbackForm","localStorageKey","persistedState","throttle","handleInput","handleSubmit","evt","form","email","_b","_a","message","_d","_c","state"],"mappings":"wIAEA,MAAMA,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAkB,sBAClBC,EAAiB,KAAK,MAAM,aAAa,QAAQD,CAAe,CAAC,EAEnEC,IACFF,EAAa,SAAS,MAAM,MAAQE,EAAe,MACnDF,EAAa,SAAS,QAAQ,MAAQE,EAAe,SAGvDF,EAAa,iBACX,QACAG,EAASC,EAAa,IAAK,CACzB,QAAS,GACT,SAAU,EACd,CAAG,CACH,EACAJ,EAAa,iBAAiB,SAAUK,CAAY,EAEpD,SAASD,EAAYE,EAAK,aACxB,MAAMC,EAAOD,EAAI,cACXE,GAAQC,GAAAC,EAAAH,GAAA,YAAAA,EAAM,WAAN,YAAAG,EAAgB,QAAhB,YAAAD,EAAuB,MAC/BE,GAAUC,GAAAC,EAAAN,GAAA,YAAAA,EAAM,WAAN,YAAAM,EAAgB,UAAhB,YAAAD,EAAyB,MAEnCE,EAAQ,CACZ,MAAAN,EACA,QAAAG,CACJ,EAEE,aAAa,QAAQV,EAAiB,KAAK,UAAUa,CAAK,CAAC,CAC7D,CAEA,SAAST,EAAaC,EAAK,CACzBA,EAAI,eAAc,EAClB,MAAMC,EAAOD,EAAI,OACXE,EAAQD,EAAK,SAAS,MAAM,MAC5BI,EAAUJ,EAAK,SAAS,QAAQ,MAEtC,GAAIC,IAAU,IAAMG,IAAY,GAC9B,OAAO,MAAM,gCAAgC,EAQ/C,QAAQ,IAAI,UALE,CACZ,MAAAH,EACA,QAAAG,CACJ,CAE8B,EAC5BJ,EAAK,MAAK,EACV,aAAa,WAAWN,CAAe,CACzC"}